<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>MAF : Reference : File names and formats : Substructure files</title>
<link type="text/css" rel="StyleSheet" href="site.css">
<link rel="Start" type="text/html" href="MAF.html"> 
<link rel="Chapter" type="text/html" href="Preface.html" title="Introduction">
<link rel="Chapter" type="text/html" href="overview.html" title="An overview of MAF">
<link rel="Chapter" type="text/html" href="reference.html" title="MAF Reference">
<link rel="Chapter" type="text/html" href="MAF.html#tutorials" title="Tutorials">
<link rel="Chapter" type="text/html" href="MAF.html#appendices" title="Appendices">
<link rel="Copyright" type="text/html" href="copyright.html"> 
<link rel="Contents" type="text/html" href="MAF.html"> 

<link rel="Prev" type="text/html" href="input_files.html" title="Input files">
<link rel="Next" type="text/html" href="coset_system_names.html" title="Coset system filenames">
<script type="text/javascript" language="Javascript" src="site.js">
</script>
</head>
<body onload="OnPageLoad()" onunload="OnPageUnload()">
<a href="MAF.html">MAF</a> : <a href="reference.html">Reference</a> : <a href="file_formats.html">File names and formats</a> : Substructure files
<h2><a name="SubstructureFiles"></a>Substructure files</h2>
<p>In this section <i>G</i> will denote a group (or monoid) defined by a rewriting system in the file <tt><i>groupname</i></tt>, and <i>H</i> a subgroup of <i>G</i>.</p>
<p>For any computation involving subgroups of a group or monoid, the user must first prepare an additional input file, called a <dfn>substructure file</dfn> that defines generators of the subgroup <i>H</i> as words in the generators of the parent structure <i>G</i>. These subgroup generators may also be given their own names: if given they must be distinct from those of the generators of <i>G</i>, even in the case where they are actually equal to one of the original generators. Names are only needed if a presentation of the subgroup on the specified generators is required, or the user requires information about how group elements are expressed as a product of a subgroup element and a coset representative.</p>

<p>If the file containing the rewriting system for <i>G</i> is called <tt><i>groupname</i></tt>, then the file containing the definitions (and possibly names) of the generators of <i>H</i> should be called <tt><i>groupname</i>.<i>subsuffix</i></tt>, where it is strongly recommended that <tt><i>subsuffix</i></tt> has the string <tt>sub</tt> as its first three letters. Some examples can be found in the directory <tt>examples/subgroups</tt>. MAF will then use these two files to generate an input file for the coset system, according to the scheme described in <a href="coset_system_names.html">Coset system filenames</a>.</p>
<p>There are three types of substructure file, corresponding to the three types of coset system supported by MAF. In examples/subgroups there is a file called <tt>t(4_2_4)</tt> that defines a presentation of the P4MM wallpaper group:</p>
<pre>
#P4MM triangle group presentation
#    b  +                          
#     / |a                         
#   +---+       
#     c                               
_RWS := rec
(
  isRWS := true,
  generatorOrder := [a,b,c],
  ordering := "shortlex",
  inverses := [a,b,c],
  equations := 
  [
    [c*a*c*a,IdWord],
    [b*a*b*a*b*a*b*a,IdWord],
    [c*b*c*b*c*b*c*b,IdWord]
  ]
);
</pre>
<p>There are various substructure files for this group. We here show one for each type of coset system.</p>
<ol>
<li>
<h4>Substructure file for a simple coset system</h4>
<p><tt>t(4_2_4).sub</tt> specifies generators for a subgroup isomorphic to the P2MM wallpaper group.
<pre>
#Subgroup isomorphic to P2MM, generated by 4 involutions
_RWS_Sub:= rec
(
  subGenerators:=
  [
    c,
    a,
    b*a*b,
    b*c*b
  ]
);
</pre>
<p>There is no need to specify the inverse of any of the subgroup generators as a subgroup generator.</p>
The coset system MAF generates from these two files is called <tt>t(4_2_4).cos</tt> and looks like this:
<pre>
#Generated by MAF
_RWS_Cos := rec
(
  isRWS := true,
  isConfluent := false,
  generatorOrder := [a,b,c,_H],
  ordering := "wreathprod",
  level := [2,2,2,1],
  inverses :=       [a,b,c,],
  equations := 
  [
    [c*a*c*a,IdWord],
    [b*a*b*a*b*a*b*a,IdWord],
    [c*b*c*b*c*b*c*b,IdWord],
    [_H*c,_H],
    [_H*a,_H],
    [_H*b*a*b,_H],
    [_H*b*c*b,_H]
  ]
);
</pre>
</li>
<li>
<h4>Substructure file for a coset system with named subgroup generators</h4>
<p><tt>t(4_2_4).subgen</tt> specifies the same subgroup, but with named subgroup generators.
<pre>
#Subgroup isomorphic to P2MM
#x and y are reflections across the two legs of the base triangle.
#z and w are reflections across the legs of the triangle which
#is the reflection of the base triangle in its hypotenuse
_RWS_Sub:= rec
(
  subGenerators:=
  [
    c,
    a,
    b*a*b,
    b*c*b
  ],
  subGeneratorNames :=
  [
    x,
    y,
    z,
    w
  ],
  subGeneratorInverseNames :=
  [
    x,
    y,
    z,
    w
  ]
);
</pre>
<p>The coset system MAF generates for these two files is called <tt>t(4_2_4).cosgen</tt> and looks like this:</p>
<pre>
#Generated by MAF
_RWS_Cos := rec
(
  isRWS := true,
  isConfluent := false,
  generatorOrder := [a,b,c,_H,x,y,z,w],
  ordering := "wreathprod",
  level := [2,2,2,1,1,1,1,1],
  inverses :=       [a,b,c,,x,y,z,w],
  equations := 
  [
    [c*a*c*a,IdWord],
    [b*a*b*a*b*a*b*a,IdWord],
    [c*b*c*b*c*b*c*b,IdWord],
    [_H*c,x*_H],
    [_H*a,y*_H],
    [_H*b*a*b,z*_H],
    [_H*b*c*b,w*_H]
  ]
);
</pre>
<div class="xpanel"><h5>Tip</h5>The author often finds it useful to process a substructure file with named subgroup generators as a simple coset system (usually when the coset system misbehaves because of long H words). One can do this by the simple expedient of replacing the "," after the ']' which terminates the subGenerators field with a ");". Both MAF and KBMAG will simply ignore the rest of the file if this is done.</div>
<p>If you use named subgroup generators then you are strongly recommended to include the <code>subGeneratorInverseNames</code> field as well. MAF follows KBMAG in its treatment of subgroup generator inverses, and this field is actually optional, but omitting it may not give the desired results. 
This point is further explained in <a href="#inverses">Inverses</a>.</p>
<p>MAF will always try to generate a coset rewriting system with named subgroup generators when the <kbd>-cos</kbd> command tail is used. So, if you want to generate a simple coset system, then make sure you do not give the subgroup generators names.</p>
<br clear="all">
</li>
<li>
<h4>Substructure file for a normal closure coset system</h4>
<p><tt>t(4_2_4).subnor</tt> specifies another subgroup, this time as the normal closure of the generating set.
<pre>
#Subgroup of index 16 isomorphic to P2
_RWS_Sub:= rec
(
  normalSubGenerators :=
  [
    c*b*c*b
  ]
);
</pre>
<p>The coset system MAF generates from these two files is called <tt>t(4_2_4).cosnor</tt> and looks like this:</p>
<pre>
#Generated by MAF
_RWS_Cos := rec
(
  isRWS := true,
  isConfluent := false,
  generatorOrder := [a,b,c,_N],
  ordering := "wreathprod",
  level := [2,2,2,1],
  inverses :=       [a,b,c,],
  equations := 
  [
    [c*a*c*a,IdWord],
    [b*a*b*a*b*a*b*a,IdWord],
    [c*b*c*b*c*b*c*b,IdWord],
    [_N*c*b*c*b,_N]
  ]
);
</pre>
<p>With this type of substructure file you may not specify names for the subgroup generators, and once again, there is no need to include the inverse of the generators as generators. MAF uses the symbol <code>_N</code> to represent the subgroup, rather than <code>_H</code> in a coset system generated from this type of file. Therefore, in this case you must not use <code>_N</code> as the name of a generator.</p>
</li>
</ol>
<h3>Rules for substructure files</h3>
<p>The syntax is once again based on that of the GAP record, and should be self-explanatory. You may like to note the following points:</p>
<ul><li>The <code>subGenerators</code> and <code>normalSubGenerators</code> lists may not have gaps. MAF does allow an empty list, but KBMAG does not. Exactly one of these two fields must be present, otherwise the file is not recognised as a substructure file. The syntax for subgroup generators is the same as was described for words in <a href="input_files.html#word_syntax">Input files</a></li>
<li>The <code>subGeneratorNames</code> field is optional but, if present, the list defined must have the same length as that defined by <code>subGenerators</code>, and must have no gaps. This field is only permitted if you use the <code>subGenerators</code> field to specify the generators. The names in the list you should follow the same rules as were given for group generators in <a href="input_files.html#name_syntax">Input files</a>.</li>
</ul>
<h3><a name="inverses"></a>Inverses</h3>
<p>If the <code>subGeneratorInverseNames</code> field is present then the list must have the same length as <code>subGeneratorNames</code>, but it may have gaps. The names occurring in it must all occur in <code>subGeneratorNames</code>. It is used to record the fact that certain of these generators are inverse to each other; it is the user's responsibility to ensure that this information is accurate (mistakes here will usually
result in bizarre and spurious output). Both MAF and KBMAG will generally add extra named subgroup generators for any subgroup generator for which an inverse has not been specified, and will do this even if, as in the examples above, the subgroup generators are obviously involutions. Furthermore, any inverse subgroup generators that are added by MAF, will come after the subgroup generators specified in the file, and will use the ^-1 suffix to make the new subgroup generators.</p>
<p>Continuing to use t(4_2_4) as our main input file:</p>
<pre>
#subgroup of index 2 isomorphic to P4
_RWS_Sub := rec
(
  subGenerators:=[a*b,b*c],
  subGeneratorNames:=[x,y],
);
</pre>
<p>generates a coset system with the following generators:  </p>
<pre>generatorOrder := [a,A,b,B,_H,x,y,x^-1,y^-1]</pre>
<p>whereas</p>
<pre>
#subgroup of index 2 isomorphic to P4
_RWS_Sub := rec
(
  subGenerators:=[a*b,b*a,b*c,c*b],
  subGeneratorNames:=[x,X,y,Y],
  subGeneratorInverseNames:=[X,x,Y,y],
);
</pre>
<p>generates a coset system with these generators:</p>
<pre>generatorOrder := [a,A,b,B,_H,x,X,y,Y]</pre> 
<p>The latter is more likely to give a confluent rewriting system.</p>
<p>In this example we have computed the inverses of the original subgroup generators explicitly. In the author's experience it is all too easy to make mistakes when doing this. The best way of avoiding this, unless you need also to be able to use the substructure file with KBMAG, is to use the MAF specific syntax (<i>expression</i>)^-1. For example in this case the <code>subGenerators</code> field from the example above would like this:</p>
<pre>subGenerators:=[a*b,(a*b)^-1,b*c,(b*c)^-1],</pre>
<h3>Coset systems of monoids</h3>
<p>Both MAF and KBMAG make it possible to create a coset system for a monoid as well as a group. In other words MAF does not require inverses to have been specified for the generators of the underlying object. However, if the subgroup generators are named it will be assumed that the subgroup generators are invertible, because inverses are treated as described in the previous section. However, it is possible to use <a href="gp_usage.html#makecosfile"><tt>makecosfile</tt></a> to generate a file in which the subgroup generators do not have explicit inverses using a command line such as
<kbd>makecosfile -sg -ni <i>groupname</i> <i>subsuffix</i></kbd>. In general the results of using such a coset system will only be meaningful if the substructure does actually generate a subgroup. If your aim is to express group elements as positive words (not involving inverses) it is better to use a wreath-product ordering with appropriately chosen levels than to remove the inverse generators from the alphabet.</p>
<h4>Use of substructure files with <tt>gpmult</tt></h4>
<p>Substructure files of the first two types can also be used to generate a multiplier for a specific collection of words for groups for which an automatic structure has been computed. For example the command line <kbd>gpmult t(4_2_4) -sub subgen</kbd> will generate a multiplier for the subgroup generators contained in <tt>t(4_2_4).subgen</tt>. The multiplier is output to the file <tt>t(4_2_4).subgen.gmg</tt>.
</p>
</body>
</html>
